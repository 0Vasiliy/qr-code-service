import{d as x,r as y,D as k,j as g,v as n,x as d,y as e,E as _,n as w,C as h,z as a,F as u,G as $,H as m,I as c}from"./LcGo-jax.js";import{u as C}from"./CnZ7_QzZ.js";const P={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},V={class:"absolute top-4 left-4"},A={class:"sm:mx-auto sm:w-full sm:max-w-md"},B={class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},H={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},M={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},S={key:0,class:"mb-4 p-4 bg-red-50 text-red-700 rounded-md"},T={key:0},q={for:"name",class:"block text-sm font-medium text-gray-700"},z={class:"mt-1"},E={for:"email",class:"block text-sm font-medium text-gray-700"},U={class:"mt-1"},j={for:"password",class:"block text-sm font-medium text-gray-700"},D={class:"mt-1"},N={key:1},L={for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},F={class:"mt-1"},G=["disabled"],I={key:0,class:"mr-2"},J={class:"mt-6 text-center"},R=x({__name:"auth",setup(K){const i=C(),r=y(!0),o=k({name:"",email:"",password:"",confirmPassword:""}),p=g(()=>i.loading),f=g(()=>i.error),v=()=>{r.value=!r.value},b=async()=>{try{if(r.value)await i.login(o.email,o.password);else{if(o.password!==o.confirmPassword)throw new Error("Passwords do not match");await i.register(o.email,o.password,o.name)}w("/dashboard")}catch(t){console.error("Auth error:",t)}};return(t,s)=>(d(),n("div",P,[e("div",V,[e("button",{onClick:s[0]||(s[0]=l=>("navigateTo"in t?t.navigateTo:_(w))("/")),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[s[5]||(s[5]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1)),h(" "+a(t.$t("auth.back")),1)])]),e("div",A,[e("h2",B,a(r.value?t.$t("auth.login"):t.$t("auth.register")),1)]),e("div",H,[e("div",M,[f.value?(d(),n("div",S,a(f.value),1)):u("",!0),e("form",{class:"space-y-6",onSubmit:$(b,["prevent"])},[r.value?u("",!0):(d(),n("div",T,[e("label",q,a(t.$t("auth.name")),1),e("div",z,[m(e("input",{id:"name","onUpdate:modelValue":s[1]||(s[1]=l=>o.name=l),type:"text",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[c,o.name]])])])),e("div",null,[e("label",E,a(t.$t("auth.email")),1),e("div",U,[m(e("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=l=>o.email=l),type:"email",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[c,o.email]])])]),e("div",null,[e("label",j,a(t.$t("auth.password")),1),e("div",D,[m(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=l=>o.password=l),type:"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[c,o.password]])])]),r.value?u("",!0):(d(),n("div",N,[e("label",L,a(t.$t("auth.confirmPassword")),1),e("div",F,[m(e("input",{id:"confirmPassword","onUpdate:modelValue":s[4]||(s[4]=l=>o.confirmPassword=l),type:"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[c,o.confirmPassword]])])])),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:p.value},[p.value?(d(),n("span",I,s[6]||(s[6]=[e("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0),h(" "+a(p.value?t.$t("auth.loading"):r.value?t.$t("auth.login"):t.$t("auth.register")),1)],8,G)])],32),e("div",J,[e("button",{onClick:v,class:"text-sm text-teal-600 hover:text-teal-500"},a(r.value?t.$t("auth.noAccount"):t.$t("auth.alreadyHaveAccount")),1)]),s[7]||(s[7]=e("div",{class:"mt-6 text-center text-sm text-gray-500"},[e("p",null,"Тестовые учетные данные:"),e("p",null,"Email: test@example.com"),e("p",null,"Пароль: test123")],-1))])])]))}});export{R as default};
